<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
    
</head>
<body>
    
    

    <script>
     
       


    function catMouse(map,moves){
        
        let size=map.indexOf("\n");  //Нахожу месторасположение переноса, чтоб знать длину строки
         for(s=0;s<map.length;s++){    //Убираю из строки /n циклом(replaceAll Codewars не принимает)
            if(map[s]=="\n"){
                map=map.replace('\n','');
            }
        }
        
    
        let array=map.split("");       //Разбиваю строку на массив один
        let subarray = []; // Создаю пустой массив, сюда буду складывать массив в массиве
        let lengthC=1; //создаю переменные чтоб подсчитать месторасположение С или m 
        let lengthm=1;
        let positionC=1;
        let positionm=1;
        for (let i = 0; i <Math.ceil(array.length/size); i++){    //С помощью этого цикла создаю в одном массиве множество массивов нужной мне длинны(size)
            subarray[i] = array.slice((i*size), (i*size) + size);
        }
        
        let check=0;   //создаю переменную для подсчета находившихся в массиве С и m
        for(let j=0; j<subarray.length;j++){  
            if(subarray[j].includes("C")&&subarray[j].includes("m")){
                    check+=2;
                      //Это на случай если С и m находятся в одной строке
                    break;
                }     
            if(subarray[j].includes("C")||subarray[j].includes("m")){  //Это на случай если С и m находятся в разных строках
                    check+=1;
                }
        }
        
        if(check!==2){                                      
            return "boring without two animals";  // Если не набралось C и m тогда "boring without two animals" 
        } else{

            for(let k=0;k<subarray.length;k++){   //Если и С и m присутствуют, тогда вызыввается цикл
                if(subarray[k].includes("C")){
                lengthC+=subarray[k].indexOf("C");   //где я нахожу местарасположение С во внутреннем массиве
                
                positionC+=subarray.indexOf(subarray[k]); //где я нахожу местарасположение С во внешнем массиве
                
                }
            }
            
            for(let r=0;r<subarray.length;r++){     //тоже самое делаю и с m
                if(subarray[r].includes("m")){
                lengthm+=subarray[r].indexOf("m");
                
                positionm+=subarray.indexOf(subarray[r]); 
                
                }
            }
    
            let lengthFinish=lengthm-lengthC;  
            lengthFinish= Math.abs(lengthFinish);      //возвожу по модулю на случай если m окажется выще с  
            let positionFinish=positionm-positionC;
            positionFinish=Math.abs(positionFinish);   //возвожу по модулю на случай если m окажется выще с 
            
            let sum=lengthFinish+positionFinish;
            
                    
            if(sum<=moves){
                return "Caught!";
            }else{
                return "Escaped!";
            }
        
        



     }
}

    

console.log( catMouse(`........
........
........
...C...m`,5));




       
       
        
        

       

        
        
  
  
  
        
    </script>
</body>
</html>